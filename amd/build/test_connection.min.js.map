{"version":3,"file":"test_connection.min.js","sources":["../src/test_connection.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * JavaScript for testing the connection to the NAAS server.\n *\n * @module     mod_naas/test_connection\n * @copyright  2023 NAAS Team\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\ndefine('mod_naas/test_connection', ['jquery', 'core/ajax'], function($) {\n    return {\n        init: function() {\n            $('#testconnection').on('click', function(e) {\n                e.preventDefault();\n                const resultDiv = $('#connection-result');\n                resultDiv.hide().removeClass();\n\n                $.ajax({\n                    url: M.cfg.wwwroot + '/mod/naas/proxy.php',\n                    type: 'GET',\n                    data: {\n                        path: '/nuggets/search?is_default_version=true&page_size=6&fulltext='\n                    },\n                    success: function(response) {\n                        const parsedResponse = JSON.parse(response);\n\n                        if (parsedResponse.success) {\n                            resultDiv.addClass(\"alert alert-success\").text('Success !');\n                        } else {\n                            resultDiv.addClass(\"alert alert-danger\").html(\n                                '<p>Failed !</p><code>' + response + '</code>'\n                            );\n                        }\n                        resultDiv.show();\n                    },\n                    error: function(xhr, status, error) {\n                        resultDiv.addClass(\"alert alert-danger\").html(\n                            `<p>Failed !</p><p>${error}</p>`\n                        );\n                        resultDiv.show();\n                    }\n                });\n            });\n        }\n    };\n});\n"],"names":["define","$","init","on","e","preventDefault","resultDiv","hide","removeClass","ajax","url","M","cfg","wwwroot","type","data","path","success","response","JSON","parse","addClass","text","html","show","error","xhr","status"],"mappings":";;;;;;;AAuBAA,kCAAmC,CAAC,SAAU,cAAc,SAASC,SAC1D,CACHC,KAAM,WACFD,EAAE,mBAAmBE,GAAG,SAAS,SAASC,GACtCA,EAAEC,uBACIC,UAAYL,EAAE,sBACpBK,UAAUC,OAAOC,cAEjBP,EAAEQ,KAAK,CACHC,IAAKC,EAAEC,IAAIC,QAAU,sBACrBC,KAAM,MACNC,KAAM,CACFC,KAAM,iEAEVC,QAAS,SAASC,UACSC,KAAKC,MAAMF,UAEfD,QACfX,UAAUe,SAAS,uBAAuBC,KAAK,aAE/ChB,UAAUe,SAAS,sBAAsBE,KACrC,wBAA0BL,SAAW,WAG7CZ,UAAUkB,QAEdC,MAAO,SAASC,IAAKC,OAAQF,OACzBnB,UAAUe,SAAS,sBAAsBE,iCAChBE,eAEzBnB,UAAUkB"}