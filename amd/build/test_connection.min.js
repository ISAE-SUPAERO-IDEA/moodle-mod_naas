define("mod_naas/test_connection",["jquery","core/ajax","core/str"],(function($,Ajax,Str){return{init:function(){$("#testconnection").on("click",(function(e){e.preventDefault();const resultDiv=$("#connection-result");resultDiv.hide().removeClass();const successStringPromise=Str.get_string("connection_test_success","naas"),failedStringPromise=Str.get_string("connection_test_failed","naas");$.ajax({url:M.cfg.wwwroot+"/mod/naas/proxy.php",type:"GET",data:{action:"test-config"},success:function(response){JSON.parse(response).success?successStringPromise.done((function(successString){resultDiv.addClass("alert alert-success").text(successString),resultDiv.show()})).fail((function(){resultDiv.addClass("alert alert-success").text("Success!"),resultDiv.show()})):failedStringPromise.done((function(failedString){resultDiv.addClass("alert alert-danger").html("<p>"+failedString+"</p><code>"+response+"</code>"),resultDiv.show()})).fail((function(){resultDiv.addClass("alert alert-danger").html("<p>Failed!</p><code>"+response+"</code>"),resultDiv.show()}))},error:function(xhr,status,error){failedStringPromise.done((function(failedString){resultDiv.addClass("alert alert-danger").html("<p>".concat(failedString,"</p><p>").concat(error,"</p>")),resultDiv.show()})).fail((function(){resultDiv.addClass("alert alert-danger").html("<p>Failed!</p><p>".concat(error,"</p>")),resultDiv.show()}))}})}))}}}));

//# sourceMappingURL=test_connection.min.js.map