/**
 * JavaScript module to test connection to NAAS API.
 *
 * @copyright  2023 ISAE-SUPAERO (https://www.isae-supaero.fr/)
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("mod_naas/test_connection",["jquery","core/ajax","core/str"],(function($,ajax,Str){return{init:function(){$("#testconnection").on("click",(function(e){e.preventDefault();const resultDiv=$("#connection-result");resultDiv.hide().removeClass();const successStringPromise=Str.get_string("connection_test_success","naas"),failedStringPromise=Str.get_string("connection_test_failed","naas");ajax.call([{methodname:"mod_naas_test_config",args:{}}])[0].done((function(){successStringPromise.done((function(successString){resultDiv.addClass("alert alert-success").text(successString),resultDiv.show()}))})).fail((error=>function(resultDiv,error,failedStringPromise){function showError(failedMessage){resultDiv.addClass("alert alert-danger").html("<p>".concat(failedMessage,"</p><p>").concat(error.message,"</p>")).show()}failedStringPromise.then(showError).catch((()=>showError("Failed!")))}(resultDiv,error,failedStringPromise)))}))}}}));

//# sourceMappingURL=test_connection.min.js.map